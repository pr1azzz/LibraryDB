<Window x:Class="LibraryManagementSystem.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LibraryManagementSystem.Views"
        mc:Ignorable="d"
        Title="Управление библиотекой" Height="600" Width="800"
        WindowStartupLocation="CenterScreen"
        Background="White">
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Панель инструментов -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,10" Background="LightGray" Height="40">
            <Button Content="Добавить книгу" Command="{Binding AddBookCommand}" Width="120" Margin="5" Padding="5" Background="LightBlue"/>
            <Button Content="Редактировать" Command="{Binding EditBookCommand}" Width="120" Margin="5" Padding="5" Background="LightBlue"/>
            <Button Content="Удалить" Command="{Binding DeleteBookCommand}" Width="120" Margin="5" Padding="5" Background="LightBlue"/>
            <Button Content="Авторы" Command="{Binding ManageAuthorsCommand}" Width="100" Margin="5" Padding="5" Background="LightGreen"/>
            <Button Content="Жанры" Command="{Binding ManageGenresCommand}" Width="100" Margin="5" Padding="5" Background="LightGreen"/>
        </StackPanel>

        <!-- Панель фильтрации -->
        <GroupBox Header="Фильтры" Grid.Row="1" Padding="5" Margin="0,0,0,10" BorderBrush="Gray" BorderThickness="1">
            <WrapPanel>
                <TextBlock Text="Поиск:" VerticalAlignment="Center" Margin="5"/>
                <TextBox Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" Width="150" Margin="5"/>
                
                <TextBlock Text="Автор:" VerticalAlignment="Center" Margin="5"/>
                <ComboBox ItemsSource="{Binding Authors}" SelectedItem="{Binding SelectedAuthor}" 
                          DisplayMemberPath="LastName" Width="150" Margin="5"/>
                
                <TextBlock Text="Жанр:" VerticalAlignment="Center" Margin="5"/>
                <ComboBox ItemsSource="{Binding Genres}" SelectedItem="{Binding SelectedGenre}" 
                          DisplayMemberPath="Name" Width="150" Margin="5"/>
                
                <Button Content="Сбросить" Click="ResetFilters_Click" Margin="5" Padding="5" Background="LightYellow"/>
            </WrapPanel>
        </GroupBox>

        <!-- Таблица книг -->
        <DataGrid Grid.Row="2" 
                  x:Name="BooksDataGrid"
                  ItemsSource="{Binding Books}" 
                  SelectedItem="{Binding SelectedBook}"
                  AutoGenerateColumns="False" 
                  IsReadOnly="True" 
                  SelectionMode="Single"
                  Margin="0,0,0,10"
                  Background="White"
                  BorderBrush="Black"
                  BorderThickness="1"
                  RowBackground="LightGoldenrodYellow"
                  AlternatingRowBackground="LightCyan"
                  MouseDoubleClick="DataGrid_MouseDoubleClick">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                <DataGridTextColumn Header="Название" Binding="{Binding Title}" Width="200"/>
                <DataGridTextColumn Header="Автор" Binding="{Binding Author.LastName}" Width="120"/>
                <DataGridTextColumn Header="Жанр" Binding="{Binding Genre.Name}" Width="100"/>
                <DataGridTextColumn Header="Год" Binding="{Binding PublishYear}" Width="60"/>
                <DataGridTextColumn Header="ISBN" Binding="{Binding ISBN}" Width="120"/>
                <DataGridTextColumn Header="В наличии" Binding="{Binding QuantityInStock}" Width="80"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Статус бар -->
        <StatusBar Grid.Row="3" Background="LightGray" Height="30">
            <StatusBarItem>
                <TextBlock Text="{Binding Books.Count, StringFormat='Всего книг: {0}'}" FontWeight="Bold"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>